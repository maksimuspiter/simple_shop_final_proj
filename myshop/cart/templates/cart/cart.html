{% extends 'base_cart/base_cart.html' %} 

{% block title %}
    Simple shop: cart
{% endblock %}
{% load static %}


{% block left_side %}
<div class="title">
    <div class="row">
        
        <div class="col"><h4><b>Simple shop</b></h4></div>
        <!--Count_item -->
        <div class="col align-self-center text-right text-muted">
            {% if cart|length == 0 %}
                Карзина пуста
            {% else %}
                Ваш заказ {{cart|length}} ед.
            {% endif %}
            
        </div>
        


    </div>
</div>    

<!-- Product_item -->
{% for product in cart %}                    
<div class="border-top border-bottom d-flex justify-content-between">
    <div class="row main align-items-center">
        <div class="col-2"><img class="img-fluid" 
            src="{{product.product.image_title.url}}"
            alt="{{product.product.name}}"></div>
        <div class="col">
            <div class="row text-muted">Shirt</div>
            <div class="row">{{product.product.name}}</div>
        </div>
        <div class="col">
            <form action="{% url 'cart:cart_add' product.product.id %}" method="post">
                {{ product.update_quantity_form.quantity }}
                {{ product.update_quantity_form.override }}
                <input type='submit' value='Update'>
                {% csrf_token %}
            </form>
        </div>
        <div class="col">{{product.total_price}} ₽</div>
    </div>
    <div>
        <form action="{% url 'cart:cart_remove' product.product.id %}" method="post">
            <button class="btn btn-danger" type="submit" value="Remove">
            X
          </button>
            {% csrf_token %}
          </form>
          

    </div>
</div>
{% endfor %}
<!-- END Product_item -->



<div class="back-to-shop"><a href="{% url 'shop:product_list' %}">←<span class="text-muted">Back to shop</span></a></div>
{% endblock %}

{% block right_side %}
<div><h5><b>Summary</b></h5></div>
<hr>
<div class="row">
    <!--Count_item -->
    <div class="col" style="padding-left:0;">ITEMS {{cart|length}}</div>
    <!--Total_price -->
    <div class="col text-right">{{ cart.get_total_price }}</div>
</div>
<form>
    <p class="text-danger">SHIPPIN Поле не готово</p>
    <!--Shipping options -->
    <select><option class="text-muted">Standard-Delivery- €5.00</option></select>
    <!--Promocode -->

    <p class="text-danger">GIVE CODE Поле не готово</p>
    <input id="code" placeholder="Enter your code">
</form>
<!--Total_price -->

<div class="row" style="border-top: 1px solid rgba(0,0,0,.1); padding: 2vh 0;">
    <div class="col">TOTAL PRICE</div>
    <div class="col text-right">{{ cart.get_total_price }}</div>
</div>

<form action="#" method="post">

    {% csrf_token %}
    <button class="btn btn-outline-dark flex-shrink-0" type="submit" value="Create order">
      <i class="bi-cart-fill me-1"></i>
      Оформить
    </button>
  </form>
{% endblock %}